# Універсальний генератор жеребкувань

Програма для проведення різних типів жеребкувань турнірів.

## Формати

| Формат | Опис |
|--------|------|
| **Нокаут** | Сітка: 1 проти останнього, 2 проти передостаннього тощо; повна сітка наперед. Bye для перших, якщо n не 2^k. Підтримка сіяних (num_seeded): жорстка сітка, несіяні — жереб. |
| **Нокаут подвійний** | Верхня + нижня сітка; виліт після другої поразки. |
| **Нокаут потрійний** | Виліт після третьої поразки. |
| **Колова система** | Кожен з кожним один раз. |
| **Подвійна колова** | Кожен з кожним двічі (дома/в гостях). |
| **Стиль Ліги чемпіонів УЄФА** | Груповий етап (групи по 4, колова в групі) → плей-оф нокаут. |
| **Етап ліги ЛЧ (League Phase)** | Сучасна формула: 36 команд, 4 кошики по 9, по 8 матчів (2 з кожного кошика, 4 вдома / 4 на виїзді). Опційно Country Lock та Max 2 per country. |
| **Кастомна формула** | Власна послідовність етапів. |

## Запуск

```bash
python main.py
```

Інтерактивно обираєте формат (1–8) та кількість учасників.

```bash
python main.py 1          # нокаут, 8 учасників
python main.py 4 12      # колова система, 12 учасників
python main.py 6         # УЄФА групи + плей-оф (32 учасники)
python main.py 8         # Етап ліги ЛЧ — 36 команд, 4 кошики
python main.py "groups(4).round_robin().top(2).knockout()"  # кастом
```

## Кастомні формули

- **Один ключовий слово:** `knockout`, `round_robin`, `double_knockout`, `double_round_robin`, `triple_knockout`, `league_phase`.
- **УЄФА з параметрами:** `uefa(8, 2)` або `uefa(groups=8, advance=2)` — 8 груп, по 2 виходять у плей-оф.
- **Етап ліги ЛЧ:** `league_phase` або `uefa_league_phase` — потрібно рівно 36 учасників.
- **Ланцюжок:**
  - `groups(N)` — розбити на групи по N учасників (або на N груп, залежно від реалізації; зараз: кількість груп обчислюється так, щоб у групі було близько N).
  - `round_robin()` — колова система всередині груп (після `groups`).
  - `top(K)` — з кожної групи виходять K учасників.
  - `knockout()` — нокаут серед тих, хто вийшов.

Приклад: групи по 4 команди, колова в групі, топ-2 з групи виходять у нокаут:

```
groups(4).round_robin().top(2).knockout()
```

## Структура проєкту

- `models.py` — учасники, матчі, групи, результат жеребкування.
- `draw_utils.py` — перемішування, сіяння, розподіл по групах.
- `formats/knockout.py` — нокаут (одиночний, подвійний, потрійний).
- `formats/round_robin.py` — колова та подвійна колова.
- `formats/uefa_style.py` — груповий етап + плей-оф (стара формула).
- `formats/uefa_league_phase.py` — етап ліги (League Phase): 36 команд, 4 кошики, 8 матчів на команду.
- `formats/custom.py` — парсер кастомних формул.
- `main.py` — CLI та приклад використання.

## Учасники та назви

У прикладах учасники мають зрозумілі назви:
- **Нокаут / колова:** `1-сіяний`, `2-сіяний`, …, `N-жереб` (перші num_seeded — сіяні, решта — жереб).
- **Етап ліги ЛЧ:** `1-кошик1`, `2-кошик1`, …, `9-кошик1`, `10-кошик2`, …, `36-кошик4`.

У коді можна використовувати власний список `Participant(id=..., name=..., seed=..., country=...)`.

## Вимоги

- Python 3.10+
